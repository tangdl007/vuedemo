{"version":3,"file":"vue.js","sources":["../src/compiler/prase.js","../src/compiler/index.js","../src/utils.js","../src/globalAPI.js","../src/observe/dep.js","../src/observe/watcher.js","../src/vdom/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["//正则表达式\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);  //匹配到的是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); //结束标签\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; //匹配属性\nconst startTagClose = /^\\s*(\\/?)>/;\n\n\n//这是语法的转移不是dom的转义   利用栈形结构来构造一棵树  \nexport function parseHTML(html){ //解析一个删除一个 知道没有解析的为止\n\n    const ELEMENT_TYPE = 1;\n    const TEXT_TYPE = 3;\n    const stack = [];\n    let currentParent;\n    let root;\n\n    function createASTElement(tag,attrs){\n        return {\n            tag,\n            type:ELEMENT_TYPE,\n            children:[],\n            attrs,\n            parent:null\n        }\n    }\n\n\n    function start(tag,attrs){\n        let node = createASTElement(tag,attrs);\n        if(!root){\n            root = node;\n        }\n        if(currentParent){\n            node.parent = currentParent;\n            currentParent.children.push(node);\n        }\n        stack.push(node);\n        currentParent = node;\n    }\n\n    function chars(text){\n        text = text.replace(/\\s/g,'');\n        text && currentParent.children.push({\n            type:TEXT_TYPE,\n            text,\n            parent:currentParent\n        })\n    }\n\n    function end(){\n        stack.pop();\n        currentParent = stack[stack.length - 1];\n    }\n\n\n\n\n    function advance(n){\n        html = html.substring(n); //匹配一点截取一点\n    }\n    function parseStart(){\n        const start = html.match(startTagOpen);\n        if(start){\n            const match = {\n                tagName:start[1],   //标签名\n                attrs:[]\n            }\n            advance(start[0].length);\n\n            let attr,end;  //赋值的话加一个括号就行 匹配的值\n            while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){  //如果标签没有结束就一直匹配\n                advance(attr[0].length);\n                match.attrs.push({name:attr[1],value:attr[3] || attr[4] || attr[5] || true});\n            }\n    \n            if(end){\n                advance(end[0].length);\n            }\n            return match;\n        }\n\n        return false;\n    }\n    while(html){    \n        //如果为0则是标签开始的位置，如果大于0  文本结束的位置\n        let textEnd = html.indexOf(\"<\");\n\n        if(textEnd == 0){\n            const startTagMatch = parseStart();\n            if(startTagMatch){\n                start(startTagMatch.tagName,startTagMatch.attrs);\n                continue;\n            }\n\n            let endTagMatch = html.match(endTag);\n            if(endTagMatch){\n                advance(endTagMatch[0].length);\n                end(endTagMatch[1])\n                continue;\n            }\n\n        }\n\n        if(textEnd > 0){\n            let text = html.substring(0,textEnd);\n            if(text){\n                chars(text);\n                advance(text.length);\n            }\n        }\n    }\n    return root;\n}","import { parseHTML } from \"./prase\";\n\n\nfunction genProps(attrs){\n    let str = \"\";\n    for(let i=0;i<attrs.length;i++){\n        let attr = attrs[i];\n\n        if(attr.name == 'style'){  //重写value的值\n            let obj = {};\n            attr.value.split(\";\").forEach(item => {\n                let [key,value] = item.split(\":\")\n                obj[key] = value\n            });\n            attr.value = obj;\n        }   \n        \n        str += `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0,-1)}}`   //去掉最后一个\n}\n\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\nfunction gen(node){\n    if(node.type == 1){\n        return codeGen(node);\n    }else{\n        let text = node.text;\n        if(!defaultTagRE.test(text)){\n            return `_v(${JSON.stringify(text)})`\n        }else{\n            let token = [];\n            let match;\n            defaultTagRE.lastIndex = 0; //每次匹配过后，lastindex会往前加1\n            let lastIndex = 0;\n            while(match = defaultTagRE.exec(text)){\n                let index = match.index;\n                if(index > lastIndex){\n                    token.push(JSON.stringify(text.slice(lastIndex,index))) \n                }\n                token.push(`_s(${match[1].trim()})`)\n                lastIndex = index + match[0].length;\n            } //是起始的位置  lastindex  中间的内容进行截取\n            if(lastIndex < text.length){\n                token.push(JSON.stringify(text.slice(lastIndex)));\n            }\n            return `_v(${token.join(\"+\")})`\n        }\n\n    }\n}\n\nfunction genChildren(children){\n    return children.map(child => gen(child)).join(\",\");   //数组转换为字符串 join  字符串转化为数组 split\n}\n\n\n\nfunction codeGen(ast) {\n    let children = genChildren(ast.children);\n\n\n    let code = (`_c('${ast.tag}',${ast.attrs.length > 0 ? genProps(ast.attrs) : null}${ast.children.length?`,${children}`:''})`);\n\n    return code;\n}\n\n\n\n//模版引擎的实现原理就是 with +  new Function\n\n\nexport function compileToFunction(template) {\n    let ast = parseHTML(template);\n    //生成字符串  _c  _v  _s\n    let code = codeGen(ast);\n    code = `with(this){return ${code}}`\n    let render = new Function(code); \n\n    return render;\n}\n\n\n\n","let strats = {};\nconst LIFECYCLE = [\n    \"beforeCreated\",\n    'created'\n]\nLIFECYCLE.forEach(hook => {\n    strats[hook] = function (p, c) {\n        if (c) {\n            if (p) {\n                return p.concat(c); //并不会返回值\n            } else {\n                return [c];\n            }\n        } else {\n            return p;\n        }\n    }\n})\nexport function mergerOptions(parent, child) {\n    let options = {};\n    for (let key in parent) {\n        mergeField(key)\n    }\n\n    for (let key in child) {\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key)\n        }\n    }\n\n    function mergeField(key) {\n        if (strats[key]) {\n            options[key] = strats[key](parent[key], child[key])\n        } else {\n            options[key] = child[key] || parent[key];\n        }\n    }\n\n    return options;\n}\n\n\n//用户的选项和全局的配置合并都一起","import { mergerOptions } from \"./utils\";\n\n\n\n\nexport function initGlobalAPi(Vue) {\n    Vue.options = {};\n    Vue.mixin = function (mixin) {  \n        this.options = mergerOptions(this.options, mixin);\n        return this;\n    }\n}","\n\nlet id = 0;\nclass Dep{\n    constructor(){\n        this.id = id++;\n        this.subs = []; //这里存放着属性对应的watcher\n    }\n    depend(){\n        Dep.target.addDep(this);//记录dep  计算属性和清理操作的时候要用\n    }\n    addSub(watcher){\n        this.subs.push(watcher);\n    }\n    notify(){\n        this.subs.forEach(watcher => watcher.update())\n    }\n}\n\n\n//用到的属性才会收集 没有用到的就不会收集\n\nDep.target = null;\n\n\nlet stack = [];\nexport function pushTarget(watcher){\n    stack.push(watcher);\n    Dep.target = watcher;\n}\nexport function popTarget(watcher){\n    stack.pop();\n    Dep.target = stack[stack.length - 1];\n}\n\nexport default Dep;","import Dep, { popTarget, pushTarget } from \"./dep\";\n\n//局部更新 提高性能\nlet id = 0;\n\nclass Watcher {\n    constructor(vm, exprOrFn, options, cb) {  //每个组件都会new watcher\n        this.id = id++;\n\n        this.renderWatcher = options;//是否为渲染watcher\n\n        if(typeof exprOrFn == 'string'){\n            this.getter = function(){\n                return vm[exprOrFn]\n            }\n        }else{\n            this.getter = exprOrFn;\n        }\n        this.deps = [];  //实现计算属性和清理工作需要用到\n        this.depsId = new Set();\n        this.lazy = options.lazy;\n        this.cb = cb;\n        this.dirty = this.lazy;\n        this.vm = vm;\n        this.user = options.user;\n\n        this.value = this.lazy ? undefined : this.get();\n\n    }\n    evaluate() {\n        this.value = this.get();\n        this.dirty = false;\n    }\n    get() {  //get方法的时候会进行依赖收集 那么改变的时候回执行这个watcher\n        pushTarget(this);\n        let value = this.getter.call(this.vm);\n        popTarget();\n        return value;\n    }\n    depend() {\n        let i = this.deps.length;\n        while (i--) {\n            this.deps[i].depend();  //让计算属性watcher也收集渲染watcher\n        }\n    }\n    addDep(dep) {  //既要保证不重复  又要保证双向  \n        let id = dep.id;\n        if (!this.depsId.has(id)) {   //在watcher进行去重\n            this.depsId.add(id);\n            this.deps.push(dep);\n            dep.addSub(this);\n        }\n    }\n    update() {\n        //实现异步更新的操作   update无论走多少次 更新操作只有一次\n        if (this.lazy) {\n            this.dirty = true;\n        } else {\n            queueWatcher(this);\n        }\n    }\n    run() {\n        let oldValue = this.value;\n        let newValue = this.get();\n        if(this.user){\n            this.cb.call(this.vm,newValue,oldValue);\n        }\n    }\n}\n\nlet queue = [];\nlet has = {};\nlet pending = false;\n\nfunction flushSchedulerQueue() {\n    let flushQueue = queue.slice(0);   //拷贝\n    queue = [];\n    has = {};\n    pending = false;\n    flushQueue.forEach(q => q.run());\n}\nfunction queueWatcher(watcher) {\n    let id = watcher.id;\n    if (!has[id]) {  //相同的watcher不用重复的去刷新\n        has[id] = true;\n        queue.push(watcher);\n\n        if (!pending) {\n            nextTick(flushSchedulerQueue);\n            pending = true;\n        }\n    }\n}\n\nlet waiting = false;\nlet callbacks = [];\nlet flushCallbacks = function () {\n    waiting = false;\n    let cbs = callbacks.slice(0);//拷贝\n    callbacks = [];\n    cbs.forEach(cb => {\n        cb();\n    })\n}\n\nlet timerFunc;\nif (Promise) {\n    timerFunc = () => {\n        Promise.resolve().then(flushCallbacks);\n    }\n} else if (MutationObserver) {\n    let observer = new MutationObserver(flushCallbacks);\n    let textNode = document.createTextNode(1);\n    observer.observe(textNode, {\n        characterData: true\n    })\n    timerFunc = () => {\n        textNode.textContent = 2;\n    }\n} else if (setImmediate) {\n    timerFunc = () => {\n        setImmediate(flushCallbacks)\n    }\n} else {\n    timerFunc = () => {\n        setTimeout(flushCallbacks);\n    }\n}\n\nexport function nextTick(cb) {    //先用户的还是先内部的  异步更新操作 不一定  那个在先那个就先执行\n    callbacks.push(cb);\n    if (!waiting) {\n        timerFunc(flushCallbacks);\n        waiting = true;\n    }\n}\n\n// mixin 可以混入一些公共的方法  数据来源不明确   \n// 计算属性根本就不会去收集依赖而是让自己的依赖去收集依赖\n// 异步更新 取最后的值\n\n\n\n\n\n\n\n\n\nexport default Watcher;","export function createElementVNode(vm,tag,data,...children){\n    if(data == null){\n        data = {}\n    }\n    let key = data.key; \n    if(key){\n        delete data.key\n    }\n    return vnode(vm,tag,key,data,children);\n}\n\n\nexport function createTextVNode(vm,text){\n    return vnode(vm,undefined,undefined,undefined,undefined,text)\n}\n\n\nexport function isSameVnode(vnode1,vnode2){\n    return vnode1.tag === vnode2.tag && vnode1.key === vnode2.key;\n}\n\n\n//ast是语法层面上的转化  描述的语法本身\n//虚拟dom描述的是dom元素  可以增加一些自定义属性\n\n\nfunction vnode(vm,tag,key,data,children,text){\n    return {\n        vm,\n        tag,\n        key,\n        data,\n        children,\n        text\n    }\n}\n","import { isSameVnode } from \".\";\n\nexport function createElm(vnode) {\n    let { tag, data, children, text } = vnode;\n    if (typeof tag == 'string') {\n        vnode.el = document.createElement(tag);  //将虚拟节点和真实节点联系起来  \n        patchProps(vnode.el,{}, data);\n        vnode.children.forEach(child => {  //递归进行创建\n            vnode.el.appendChild(createElm(child));\n        });\n    } else {\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el;   //真实节点\n}\nexport function patchProps(el,oldProps = {},props={}) {\n    //老的有新的没有直接删除 对应的el就是元素本身   尽量复用老的  \n    let oldStyles = oldProps.style || {};\n    let newStyles = props.style || {};\n    for(let key in oldStyles){\n        if(!newStyles[key]){\n            el.style[key] = \"\";\n        }\n    }\n\n    for(let key in oldProps){\n        if(!props[key]){\n            el.removeAttribute(key);\n        }\n    }\n\n    //新的覆盖老的\n    for (let key in props) {\n        if (key == 'style') {\n            for (let styleName in props.style) {\n                el.style[styleName] = props.style[styleName];\n            }\n        } else {\n            el.setAttribute(key, props[key]);\n        }\n    }\n}\n\nexport function patch(oldVnode, vnode) {\n    const isRealElement = oldVnode.nodeType;\n\n    if (isRealElement) {\n        const elm = oldVnode;\n        const parentElm = elm.parentNode;\n\n        let newElm = createElm(vnode);\n\n        parentElm.insertBefore(newElm, elm.nextSibling)\n        parentElm.removeChild(elm)\n\n\n        return newElm;\n    } else {\n\n        return patchVnode(oldVnode,vnode);\n\n    }\n}\n\nfunction  patchVnode(oldVnode,vnode){\n    //不是相同节点\n    if (!isSameVnode(oldVnode, vnode)) {\n        let el = createElm(vnode);\n        oldVnode.el.parentNode.replaceChild(el, oldVnode.el);\n        return el;\n    }\n\n\n    //文本节点还是元素节点\n    let el = vnode.el = oldVnode.el;\n    if (!oldVnode.tag) {\n        if (oldVnode.text !== vnode.text) {\n            el.textContent = vnode.text;  //用新的文本替换掉老的文本\n        }\n    }\n    \n    //是标签比较属性\n    patchProps(el,oldVnode.data,vnode.data);\n\n\n    //比较儿子 一个有儿子一个没有  两个都有儿子 两个都没有\n\n    let oldChildren = oldVnode.children || [];\n    let newChildren = vnode.children || [];\n\n    if(oldChildren.length > 0 && newChildren.length > 0){\n        updateChildren(el,oldChildren,newChildren);\n    }else if(newChildren.length > 0){\n        mountChildren(el,newChildren);\n    }else if(oldChildren.length > 0){\n        el.innerHTML = \"\";\n    }\n\n\n    return el;\n}\n\nfunction mountChildren(el,newChildren){\n    for(let i=0;i<newChildren.length;i++){\n        let child = newChildren[i];\n        el.appendChild(createElm(child));\n    }\n}\n\n\nfunction updateChildren(el,oldChildren,newChildren){\n    //头指针超过尾指针就结束\n    let oldStartIndex = 0;\n    let newStartIndex = 0;\n    let oldEndIndex = oldChildren.length - 1;\n    let newEndIndex = newChildren.length - 1;\n\n    let oldStartVnode = oldChildren[0];\n    let newStartVnode = newChildren[0];\n\n    let oldEndVnode = oldChildren[oldEndIndex];\n    let newEndVnode = newChildren[newEndIndex];\n\n    while(oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex){  //头指针超过尾指针的时候就结束\n        //头头比对\n        if(isSameVnode(oldStartVnode,newStartVnode)){\n            patchVnode(oldStartVnode,newStartVnode);\n            oldStartVnode = oldChildren[++oldStartIndex];\n            newStartVnode = newChildren[++newStartIndex];\n        }else if(isSameVnode(oldEndVnode,newEndVnode)){  //尾尾比\n            patchVnode(oldEndVnode,newEndVnode);\n            oldEndVnode = oldChildren[--oldEndIndex];\n            newEndVnode = newChildren[--newEndIndex];\n        }else if(isSameVnode(oldEndVnode,newStartVnode)){ //交叉比  老的尾与新的头比较 比较完后往前追加\n            patchVnode(oldEndVnode,newStartVnode);\n            el.insertBefore(oldEndVnode.el,oldStartVnode.el)\n            oldEndVnode = oldChildren[--oldEndIndex];\n            newStartVnode = newChildren[++newStartIndex];\n        }\n    }\n    if(newStartIndex <= newEndIndex){\n        for(let i = newStartIndex;i <= newEndIndex;i++){\n            let childEl = createElm(newChildren[i]);\n\n            let anchor = newChildren[newStartIndex + 1]?newChildren[newStartIndex + 1].el:null\n  \n            el.insertBefore(childEl,anchor); //为null就是appendChild\n        }\n    }\n    if(oldStartIndex <= oldEndIndex){\n        for(let i=oldStartIndex;i<=oldEndIndex;i++){\n            let oldEl = oldChildren[i].el;\n            el.removeChild(oldEl);\n        }\n    }\n}\n\n\n\n\n\n//比较虚拟dom 尽可能的服用老的 提升性能\n//节点比较  节点不同 tag和key\n//文本节点  \n//元素节点  props  老的有的新的没有去掉  新的覆盖老的\n//比较儿子  双指针的方式  头指针超过尾指针的时候结束  超过的部分 追加或者去除\n//是一个概念  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\nimport Watcher from \"./observe/watcher\";\nimport { createElementVNode, createTextVNode } from \"./vdom\";\nimport { patch } from \"./vdom/patch\"\n\n\n\n\nexport function initLifeCycle(Vue) {\n    Vue.prototype._update = function (vnode) {\n        const vm = this;\n        const el = vm.$el;\n\n        //既有初始化的功能又有更新的功能\n        vm.$el = patch(el, vnode); //新的el\n    }\n    Vue.prototype._c = function () {\n        return createElementVNode(this, ...arguments);\n    }\n    Vue.prototype._v = function () {\n        return createTextVNode(this, ...arguments);\n    }\n    Vue.prototype._s = function (value) {\n        if (typeof value !== 'object') return value;\n        return JSON.stringify(value);\n    }\n    Vue.prototype._render = function () {\n        let vm = this;\n        //当渲染的时候会去实例中取值  将属性和视图绑定在一起\n        return vm.$options.render.call(vm);\n    }\n}\n\n\nexport function mountComponent(vm, el) {\n    vm.$el = el;\n\n\n    const updateComponent = () => {\n        vm._update(vm._render());\n    }\n\n    new Watcher(vm, updateComponent, true);\n\n}\n\n\n\n/*    依赖收集\n    对每一个属性增加一个dep属性\n    页面渲染的时候，将渲染逻辑放到watcher中\n    dep记录这个watcher，属性发生变化之后用dep找到这个watcher进行重新渲染即可\n*/\n\nexport function callHook(vm, hook) {  //调用钩子函数\n    let handlers = vm.$options[hook];\n    if (handlers) {\n        handlers.forEach(handler => handler.call(vm));\n    }\n}\n\n\n","//重写数组中的部分方法\nlet oldArrayProto = Array.prototype;\n\nexport let newArrayProto = Object.create(oldArrayProto); //在自己的身上改不在array本身上改变\n\n\n//能够改变array本身的方法\nlet methods = [\n    \"push\",\n    \"pop\",  //移除最后一个元素，并返回该元素\n    \"shift\",//删除第一个元素并返回\n    \"unshift\",\n    \"reverse\",\n    \"sort\",\n    \"splice\"  //删除添加元素  查询的位置  删除的个数 新增的元素\n] //concat slice都不会改变数组本身\n\n//切片编程  自己实现一个功能 把原有功能放进去  可以追加功能  实现切片编程\n\n\n\nmethods.forEach(method => {\n    newArrayProto[method] = function(...args){ //实例调用的方法 \n        const result = oldArrayProto[method].call(this,...args); //在里面调用this的指向就有问题  切片编程\n\n        //新增的元素进行属性的劫持\n        let inserted;\n        let ob = this.__ob__;\n        switch (method) {\n            case \"push\":\n            case \"unshift\":\n                inserted = args;\n            case \"splice\":\n                inserted = args.slice(2);\n            default:\n                break;\n        }\n\n        if(inserted){\n            ob.observeArr(inserted);\n        }\n\n        //更新\n        ob.dep.notify();\n        return result;\n    }\n})","import { newArrayProto } from \"./array\";\nimport Dep from \"./dep\";\n\nclass Observer{\n    constructor(data){\n        //新增一个属性希望能够更行 $set\n\n        this.dep = new Dep();\n\n\n        //object.defineProperty只能对已经存在的属性进行劫持 对于新增和删除的属性不能进行劫持  $set $delete\n        Object.defineProperty(data,\"__ob__\",{\n            value:this,\n            enumerable:false   //不可枚举 循环取不到\n        })\n        // data.__ob__ = this; //如果数组有__ob__则说明数据并观测过了   如果是对象的话进入死循环\n        //数组的方法进行拦截  在中间加了一个\n        if(Array.isArray(data)){\n            this.observeArr(data);\n            data.__proto__ = newArrayProto;\n        }else{\n            this.walk(data)\n        }\n    }\n    walk(data){ //循环对象对属性进行劫持\n        //重新定义属性  性能消耗点  这也是为什么换成vue3换成proxy后性能明显提升的原因\n        Object.keys(data).forEach(key => defineReactive(data,key,data[key]))\n    }\n    observeArr(data){\n        data.forEach(item => observe(item));   //数组的每一项也要进行属性的劫持\n    }\n}\n\n\nfunction dependArrar(value){\n    for(let i=0;i<value.length;i++){\n        let current = value[i];\n        current.__ob__ && current.__ob__.dep.depend();\n        if(Array.isArray(current)){\n            dependArrar(current);\n        }\n    }\n}\nexport function defineReactive(target,key,value){ //闭包 这里的执行栈并没有被销毁 get和set方法能拿到value\n    let childOb = observe(value);\n    let dep = new Dep();  //每一个属性增加一个dep属性  一起进行依赖的收集\n    Object.defineProperty(target,key,{\n        get(){\n            if(Dep.target){\n                dep.depend(); //属性收集器记住当前的watcher\n                if(childOb){\n                    childOb.dep.depend(); //让数组和对象本身也实现依赖收集\n\n                    if(Array.isArray(value)){\n                        dependArrar(value)\n                    }\n                }\n            }\n            return value\n        },\n        set(newValue){\n            if(value === newValue)return;\n            value = newValue;\n            dep.notify(); // 通知更新\n        }\n    })\n}\n\nexport function observe (data){\n    //只对对象进行属性劫持\n    if(typeof data !== 'object' || data == null)return;\n    \n    if(data.__ob__ instanceof Observer)return data.__ob__; //被观测过了 直接return\n\n    return new Observer(data);\n}\n\n//异步更新的操作\n\n//不存在的属性监控不到 存在属性重写方法\n\n\n//不存在的属性监控不到   存在的属性重写方法\n\n\n// 虚拟节点的比对\n\n\n\n\n\n","import Dep from \"./observe/dep.js\";\nimport { observe } from \"./observe/index.js\";\nimport Watcher, { nextTick } from \"./observe/watcher.js\";\n\nexport function initState(vm) {\n    let opts = vm.$options;\n    if (opts.data) {\n        initData(vm);\n    }\n    if (opts.computed) {\n        initComputed(vm);\n    }\n    if(opts.watch){\n        initWatch(vm);\n    }\n}\n\nfunction initWatch(vm){\n    let watch = vm.$options.watch;\n    \n    for(let key in watch){\n        const handler = watch[key]; //数组、字符串、函数\n        \n        if(Array.isArray(handler)){\n            for(let i=0;i<handler.length;i++){\n                createWatcher(vm,key,handler[i])\n            }\n        }else{\n            createWatcher(vm,key,handler)\n        }\n    }\n}\n\nfunction createWatcher(vm,key,handler){\n    //字符串 数组 函数\n    if(typeof handler == 'string'){\n        handler = vm[handler]\n    }\n\n    return vm.$watch(key,handler)\n}\n\nfunction Proxy(vm, target, key) {\n    Object.defineProperty(vm, key, {\n        get() {  //取值取_data上的值\n            return vm[target][key]\n        },\n        set(newValue) { //设置值设置_data上的值\n            if (newValue === vm[target][key]) return;\n            vm[target][key] = newValue\n        }\n    })\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data;\n    data = typeof data === 'function' ? data.call(vm) : data;  //vm调用的\n    vm._data = data;  //在实例上进行属性的劫持\n    observe(data);\n\n    //vm._data上的数据进行代理\n\n    for (let key in data) {\n        Proxy(vm, '_data', key)\n    }\n}\n\n\nfunction initComputed(vm) {\n    const computed = vm.$options.computed;\n    const watchers = vm._computedWatchers = {};\n    for (let key in computed) {\n        let userDef = computed[key]; //值可能是函数也可能是对象 对象要分get和set  函数这是get\n\n        //计算属性也要有一个watcher\n        let fn = typeof userDef == 'function' ? userDef : userDef.get;\n        watchers[key] = new Watcher(vm, fn, { lazy: true });//将属性和watcher对应起来\n\n        defineComputed(vm, key, userDef);\n    }\n}\n\nfunction defineComputed(target, key, userDef) {\n    const setter = userDef.set || (() => { });\n\n    //可以通过实例拿到对应的属性\n    Object.defineProperty(target, key, {\n        get: createComputedGetter(key),\n        set: setter\n    })\n}\n\nfunction createComputedGetter(key) {\n    return function () {\n        const watcher = this._computedWatchers[key];\n        if (watcher.dirty) {\n            watcher.evaluate()\n        }\n        if (Dep.target) { //计算属性出栈后还有渲染watcher\n            watcher.depend();\n        }\n\n        return watcher.value;\n    }\n}\n\nexport function initStateMixin(Vue){\n    Vue.prototype.$nextTick = nextTick;\n    Vue.prototype.$watch = function(exprOrFn,cb){\n        //属性的值改变之后 直接执行cb就行\n        new Watcher(this,exprOrFn,{user:true},cb); //用户自己写的watcher\n    }\n}\n\n\n\n//首先初始化数据  vue2 兼容ie9以上  vue3抛弃了ie   proxy进行属性劫持\n\n\n//一个计算属性对应一个watcher 并且放到实例上\n\n\n\n/* \n    computed就是带有dirty属性的watcher\n        两种形式 一个对象 这个函数就是getter setter就是空函数\n        属性发生变化的时候\n        渲染watcher收集到\n    \n\n\n\n*/","import { compileToFunction } from \"./compiler\";\nimport { callHook, mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\nimport { mergerOptions } from \"./utils\";\n\nexport function initMixin(Vue){\n    Vue.prototype._init = function(options){  //原型中的this指的都是实例\n        const vm = this;\n        vm.$options = mergerOptions(this.constructor.options,options);  //$表示vue里面的变量  将用户的选项挂载到实例上\n        \n        callHook(vm,\"beforeCreated\");\n        //初始化数据\n        initState(vm);\n        callHook(vm,'created');   //这里面就已经执行了\n\n\n        if(options.el){\n            vm.$mount(options.el);  //实现数据的挂载 第一次合并的时候父亲就是\n        }\n    }\n\n\n    Vue.prototype.$mount = function(el){\n        const vm = this;\n        el = document.querySelector(el);\n        let opts = vm.$options;\n        if(!opts.render){\n            let template\n            if(!opts.template && el){\n                template = el.outerHTML;\n            }else{\n                if(el){\n                    template = opts.template;\n                }\n            }\n            //先找render 再找template  再找el outerHTML\n\n            //如果有模板就进行编译\n\n            if(template && el){\n                const render = compileToFunction(template);\n                opts.render = render\n            }\n        }   \n\n        mountComponent(vm,el); //组件的挂载\n    }\n}\n\n\n\n//初始化  状态初始化  data初始化\n","import { compileToFunction } from \"./compiler\";\nimport { initGlobalAPi } from \"./globalAPI\";\nimport { initMixin } from \"./init\"\nimport { initLifeCycle } from \"./lifecycle\";\nimport { initStateMixin } from \"./state\";\nimport { createElm, patch } from \"./vdom/patch\";\n\nfunction Vue(options) {\n    this._init(options)\n}\n\n\ninitMixin(Vue); //初始化方法   通过方法来进行传递\ninitLifeCycle(Vue);\ninitGlobalAPi(Vue);\ninitStateMixin(Vue);\n\n\n\n\nlet render1 = compileToFunction(`<ul style=\"color:red\">\n    <li key=\"a\">a</li>\n    <li key=\"b\">b</li>\n    <li key=\"c\">c</li>\n    <li key=\"d\">d</li>\n</ul>`);\nlet vm1 = new Vue({\n    data: {\n        name: \"zf\"\n    }\n})\nlet prevVnode = render1.call(vm1);  //对象\nlet el = createElm(prevVnode);\n\ndocument.body.appendChild(el);\n\nlet render2 = compileToFunction(`<ul style=\"background:yellow\">\n    <li key=\"d\">d</li>\n    <li key=\"a\">a</li>\n    <li key=\"b\">b</li>\n    <li key=\"c\">c</li>\n</ul>`);\nlet vm2 = new Vue({\n    data: {\n        name: \"李寻欢\"\n    }\n})\nlet nextVnode = render2.call(vm2);  //对象\n\n\n\n//尽可能的服用老节点  节约性能  平级来进行比较  父亲不一样就不比较儿子\nsetTimeout(() => {\n    patch(prevVnode, nextVnode)\n}, 1000);\n\n\n\n\n\nexport default Vue;\n"],"names":["ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","parent","start","node","push","chars","text","replace","end","pop","length","advance","n","substring","parseStart","match","tagName","attr","name","value","textEnd","indexOf","startTagMatch","endTagMatch","genProps","str","i","obj","split","forEach","item","key","JSON","stringify","slice","defaultTagRE","gen","codeGen","test","token","lastIndex","exec","index","trim","join","genChildren","map","child","ast","code","compileToFunction","template","render","Function","strats","LIFECYCLE","hook","p","c","concat","mergerOptions","options","mergeField","hasOwnProperty","initGlobalAPi","Vue","mixin","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","Watcher","vm","exprOrFn","cb","renderWatcher","getter","deps","depsId","Set","lazy","dirty","user","undefined","get","call","depend","dep","has","add","addSub","queueWatcher","oldValue","newValue","queue","pending","flushSchedulerQueue","flushQueue","q","run","nextTick","waiting","callbacks","flushCallbacks","cbs","timerFunc","Promise","resolve","then","MutationObserver","observer","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","createElementVNode","data","vnode","createTextVNode","isSameVnode","vnode1","vnode2","createElm","el","createElement","patchProps","appendChild","oldProps","props","oldStyles","style","newStyles","removeAttribute","styleName","setAttribute","patch","oldVnode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","patchVnode","replaceChild","oldChildren","newChildren","updateChildren","mountChildren","innerHTML","oldStartIndex","newStartIndex","oldEndIndex","newEndIndex","oldStartVnode","newStartVnode","oldEndVnode","newEndVnode","childEl","anchor","oldEl","initLifeCycle","prototype","_update","$el","_c","arguments","_v","_s","_render","$options","mountComponent","updateComponent","callHook","handlers","handler","oldArrayProto","Array","newArrayProto","Object","create","methods","method","args","result","inserted","ob","__ob__","observeArr","notify","Observer","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","dependArrar","current","childOb","set","initState","opts","initData","computed","initComputed","watch","initWatch","createWatcher","$watch","Proxy","_data","watchers","_computedWatchers","userDef","fn","defineComputed","setter","createComputedGetter","evaluate","initStateMixin","$nextTick","initMixin","_init","constructor","$mount","querySelector","outerHTML","render1","vm1","prevVnode","body","render2","vm2","nextVnode"],"mappings":"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"}